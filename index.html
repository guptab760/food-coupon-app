<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Food Coupon Generator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
    h1 { color: #333; }
    input, button { padding: 10px; margin: 10px 0; font-size: 16px; }
    .coupon { border: 1px solid #ccc; background: #fff; padding: 10px; margin: 10px 0; display: inline-block; text-align: center; }
    canvas { margin-top: 10px; }
  </style>
</head>
<body>
  <h1>üçî Food Coupon Generator</h1>

  <label>Enter Amount (‚Çπ): </label>
  <input type="number" id="amount" min="0" placeholder="Enter amount" />
  <button onclick="generateCoupons()">Generate Coupons</button>

  <div id="output"></div>

  <script>
    function getCouponCount(amount) {
      if (amount >= 5000) return 8;
      if (amount >= 1500) return 4;
      if (amount >= 1000) return 3;
      if (amount >= 500) return 2;
      return 0;
    }

    function generateCoupons() {
      const amount = parseInt(document.getElementById("amount").value);
      const count = getCouponCount(amount);
      const output = document.getElementById("output");
      output.innerHTML = "";

      if (count === 0) {
        output.innerHTML = "<p>‚ùå Not eligible for coupons.</p>";
        return;
      }

      // Load existing coupons
      let coupons = JSON.parse(localStorage.getItem("coupons") || "[]");

      for (let i = 0; i < count; i++) {
        const code = "COUPON-" + Math.random().toString(36).substr(2, 9).toUpperCase();
        const coupon = { code: code, redeemed: false };
        coupons.push(coupon);

        const div = document.createElement("div");
        div.className = "coupon";
        div.innerHTML = "<strong>" + code + "</strong><br>";

        const qr = document.createElement("canvas");
        new QRious({ element: qr, value: code, size: 150 });
        div.appendChild(qr);

        output.appendChild(div);
      }

      // Save coupons in localStorage
      localStorage.setItem("coupons", JSON.stringify(coupons));
    }
  </script>
</body>
</html>
